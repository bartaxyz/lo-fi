(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{8663:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo",function(){return r(407)}])},407:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(5893),o=r(7294),i=r(3923),a=r(5147),c=r(6665),s=r(4336);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){var t=(0,o.useRef)(),r=(0,s.M4)({position:[0,-.06,0]}).position;return(0,n.jsxs)("mesh",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}({},e,{ref:t,rotation:[-Math.PI/2,0,0],position:r,receiveShadow:!0,children:[(0,n.jsx)("planeBufferGeometry",{attach:"geometry",args:[100,100]}),(0,n.jsx)("meshPhysicalMaterial",{attach:"material",color:"#111"})]}))},f=r(8626),d=r(5769),m=[{name:"Good Things Take Time",artist:"Ond\u0159ej B\xe1rta",file:"/music/sound/OndrejBarta-GoodThingsTakeTime.mp3",cover:"/music/covers/OndrejBarta-GoodThingsTakeTime.png"}],h=r(4234);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(){var e=(0,f.L)("/models/vinyl.gltf"),t=y((0,d.m)([m[0].cover]),1)[0],r=(0,d.m)("/models/vinyl-texture.png"),i=(0,h.cy)();return console.log({musicPlayer:i}),(0,a.xQ)((function(t,r){var n=Math.PI/2;e.scene.rotation.y+=n*r})),(0,o.useEffect)((function(){e&&t&&(r.anisotropy=1,console.log(e.scene.children),e.scene.children[1].material.map=r,e.scene.children[0].material.map=t)}),[e,t]),(0,n.jsx)(o.Suspense,{fallback:null,children:(0,n.jsx)("primitive",{object:e.scene})})},b=function(){var e=(0,f.L)("/models/record-player.gltf");return(0,a.xQ)((function(t,r){if(e)Math.PI})),(0,o.useEffect)((function(){e&&(e.scene.position.set(0,0,0),e.scene.scale.set(.14,.14,.14))}),[e]),(0,n.jsx)(o.Suspense,{fallback:null,children:(0,n.jsx)("primitive",{object:e.scene})})},g=function(){return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(c.z,{}),(0,n.jsx)("ambientLight",{}),(0,n.jsx)("pointLight",{position:[10,10,10],castShadow:!0,shadowMapHeight:800,shadowMapWidth:800}),(0,n.jsx)(u,{}),(0,n.jsx)(j,{}),(0,n.jsx)(b,{})]})},v=r(5121);function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){x(e,t,r[t])}))}return e}var w=function(e){var t=(0,o.useRef)();return(0,a.xQ)((function(e,r){if(t.current){var n=.15;t.current.rotation.x+=r*n,t.current.rotation.y+=r*n,t.current.rotation.z+=r*n}})),(0,n.jsx)(o.Fragment,{children:(0,n.jsxs)("mesh",O({},e,{ref:t,children:[(0,n.jsx)("icosahedronBufferGeometry",{args:[1,5],attach:"geometry"}),(0,n.jsx)(v.Y,{color:"red",attach:"material",distort:.6,speed:1,wireframe:!0})]}))})},P=r(2212);function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}var E=function(e){var t=(0,o.useRef)();return(0,n.jsx)(o.Fragment,{children:(0,n.jsxs)("mesh",k({},e,{ref:t,position:new P.Vector3(0,0,-28),children:[(0,n.jsx)("boxBufferGeometry",{args:[50,50,50,5,5,5],attach:"geometry"}),(0,n.jsx)(v.Y,{color:"black",attach:"material",distort:.25,speed:.25,reflectivity:.5,sheen:200,roughness:1})]}))})},T=function(){return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)("ambientLight",{}),(0,n.jsx)("pointLight",{intensity:1,position:[4,4,4],color:"blue"}),(0,n.jsx)(w,{}),(0,n.jsx)(E,{})]})};function _(){var e=(0,o.useState)(!1),t=e[0],r=e[1],a=(0,o.useState)(!1),c=a[0],s=a[1],l=(0,o.useState)(0),u=l[0],p=l[1];f.L.preload("/models/vinyl.gltf"),f.L.preload("/models/record-player.gltf");d.m.preload(m[0].cover),d.m.preload("/models/vinyl-texture.png");var y=(0,h.cy)();(0,o.useEffect)((function(){y.setCurrentSong(m[0])}),[]);return(0,o.useEffect)((function(){if(t){var e=setTimeout((function(){p(Math.min(100,u+10*Math.random())),u>=100&&(clearInterval(e),r(!1),s(!0))}),25);return function(){return clearTimeout(e)}}}),[t,u]),(0,n.jsx)(o.Fragment,{children:(0,n.jsxs)(M,{children:[!c&&(0,n.jsx)(L,{children:(0,n.jsx)(i.Button,{css:{zIndex:1,pointerEvents:"all"},color:"primary",rounded:!0,onClick:function(){r(!0)},disabled:t,icon:t?(0,n.jsx)(i.Loading,{color:"white",size:"sm",type:"spinner"}):null,children:t?(0,n.jsxs)(o.Fragment,{children:[Math.floor(u),"% Loaded",(0,n.jsx)(i.Progress,{color:"primary"})]}):"Play"})}),(0,n.jsx)(I,{shadows:!0,children:c?(0,n.jsx)(g,{}):(0,n.jsx)(T,{})})]})})}var M=(0,i.styled)("div",{padding:"$8",height:"100%"}),L=(0,i.styled)("div",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1,pointerEvents:"none"}),I=(0,i.styled)(a.Xz,{position:"absolute",height:"100%",top:0,left:0,background:"$accents1",borderRadius:"$base"})}},function(e){e.O(0,[737,121,814,774,888,179],(function(){return t=8663,e(e.s=t);var t}));var t=e.O();_N_E=t}]);