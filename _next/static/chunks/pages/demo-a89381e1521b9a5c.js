(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{8663:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo",function(){return t(4889)}])},4889:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var r=t(5893),i=t(7294),o=t(3923),s=t(5147),a=t(6665),l=t(4336),c=t(8626),u=t(5769),f=[{name:"Good Things Take Time",artist:"Ond\u0159ej B\xe1rta",file:"/music/sound/OndrejBarta-GoodThingsTakeTime.mp3",cover:"/music/covers/OndrejBarta-GoodThingsTakeTime.png"}],d=t(4234);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],s=!0,a=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==t.return||t.return()}finally{if(a)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(){var e=(0,c.L)("/models/vinyl.gltf"),n=h((0,u.m)([f[0].cover]),1)[0],t=(0,u.m)("/models/vinyl-normal.png"),o=(0,u.m)("/models/vinyl-inverted-normal.png"),a=(0,d.cy)(),m=((0,s.Ky)(),(0,l.M4)("Vinyl",{reflectivity:100,metalness:1.4,roughness:.5})),y=(0,l.M4)("Cover",{reflectivity:100,metalness:1});return console.log({musicPlayer:a}),(0,s.xQ)((function(n,t){var r=Math.PI/2;e.scene.rotation.y+=r*t})),(0,i.useEffect)((function(){e&&n&&y&&m&&(console.log(e.scene.children),e.scene.children[1].material.map=n,e.scene.children[1].material.roughnessMap=o,e.scene.children[1].material.metalnessMap=t,e.scene.children[1].material.roughness=m.roughness,e.scene.children[1].material.reflectivity=m.reflectivity,e.scene.children[1].material.metalness=m.metalness,e.scene.children[0].material.map=n,e.scene.children[0].material.reflectivity=y.reflectivity,e.scene.children[0].material.metalness=y.metalness)}),[e,n,y,m]),(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)("primitive",{object:e.scene})})},p=function(){var e=(0,c.L)("/models/record-player.gltf");return(0,s.xQ)((function(n,t){if(e)Math.PI})),(0,i.useEffect)((function(){}),[e]),(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)("primitive",{object:e.scene})})},v=function(){var e=(0,c.L)("/models/environment.gltf");return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)("primitive",{object:e.scene})})};function j(){var e=(0,s.Ky)((function(e){return e.controls})),n=(0,l.M4)("Camera",{azimuth:{value:Math.PI/2,min:0,max:Math.PI},polar:{value:.8,min:0,max:Math.PI/2},fov:{value:50,min:0,max:100}}),t=n.azimuth,r=n.polar,i=n.fov;return(0,s.xQ)((function(){null===e||void 0===e||e.setAzimuthalAngle(t),null===e||void 0===e||e.setPolarAngle(r),e.object.fov=i})),null}var g=function(){var e=(0,l.M4)("Light #1 Controls",{color:"#ffffff",position:[10,10,10],intensity:1}),n=(0,l.M4)("Light #2 Controls",{color:"#ffffff",position:[-5,8,6],intensity:1}),t=(0,i.useRef)();return console.log(t.current),(0,i.useEffect)((function(){}),[t.current]),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(a.z,{makeDefault:!0,ref:t,enabled:!0,zoom0:1e3}),(0,r.jsx)(j,{}),(0,r.jsx)("ambientLight",{}),(0,r.jsx)("pointLight",{color:e.color,position:e.position,intensity:e.intensity}),(0,r.jsx)("pointLight",{color:n.color,position:n.position,intensity:n.intensity}),(0,r.jsx)(v,{}),(0,r.jsx)(y,{}),(0,r.jsx)(p,{})]})},x=t(5121);function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}var O=function(e){var n=(0,i.useRef)();return(0,s.xQ)((function(e,t){if(n.current){var r=.15;n.current.rotation.x+=t*r,n.current.rotation.y+=t*r,n.current.rotation.z+=t*r}})),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("mesh",w({},e,{ref:n,children:[(0,r.jsx)("icosahedronBufferGeometry",{args:[1,5],attach:"geometry"}),(0,r.jsx)(x.Y,{color:"red",attach:"material",distort:.6,speed:1,wireframe:!0})]}))})},P=t(2212);function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}var E=function(e){var n=(0,i.useRef)();return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("mesh",S({},e,{ref:n,position:new P.Vector3(0,0,-28),children:[(0,r.jsx)("boxBufferGeometry",{args:[50,50,50,5,5,5],attach:"geometry"}),(0,r.jsx)(x.Y,{color:"black",attach:"material",distort:.25,speed:.25,reflectivity:.5,sheen:200,roughness:1})]}))})},M=function(){return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("ambientLight",{}),(0,r.jsx)("pointLight",{intensity:1,position:[4,4,4],color:"blue"}),(0,r.jsx)(O,{}),(0,r.jsx)(E,{})]})},T=t(9521),_=t(7854),L=function(){var e=(0,T.S)(),n=(e.active,e.progress);e.errors,e.item,e.loaded,e.total;return(0,r.jsx)(_.V,{center:!0,children:(0,r.jsxs)(o.Button,{rounded:!0,disabled:!0,icon:(0,r.jsx)(o.Loading,{color:"white",size:"sm",type:"spinner"}),children:[n.toFixed(0)," % loaded"]})})};function z(){var e=(0,i.useState)(!1),n=e[0],t=e[1],s=(0,d.cy)();(0,i.useEffect)((function(){s.setCurrentSong(f[0])}),[]);var a;return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(I,{children:[!n&&(0,r.jsx)(A,{children:(0,r.jsx)(o.Button,{css:{zIndex:1,pointerEvents:"all"},color:"primary",rounded:!0,onClick:function(){t(!0)},children:"Play"})}),(0,r.jsx)(C,{shadows:!0,gl:{antialias:!0},dpr:Math.max(null!==(a=window.devicePixelRatio)&&void 0!==a?a:1,2),children:(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(L,{}),children:n?(0,r.jsx)(g,{}):(0,r.jsx)(M,{})})})]})})}var I=(0,o.styled)("div",{padding:"$8",height:"100%"}),A=(0,o.styled)("div",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1,pointerEvents:"none"}),C=(0,o.styled)(s.Xz,{position:"absolute",height:"100%",top:0,left:0,background:"$accents1",borderRadius:"$base"})}},function(e){e.O(0,[737,121,816,774,888,179],(function(){return n=8663,e(e.s=n);var n}));var n=e.O();_N_E=n}]);